<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aviator Tracker Pro</title>
  <link rel="stylesheet" href="sidepanel.css">
</head>

<body>
  <div class="container">

    <!-- Header -->
    <header class="header">
      <h1>ðŸŽ¯ Aviator Tracker Pro</h1>
      <span class="version">v3.0 - High Flyer</span>
    </header>

    <!-- Estado Actual -->
    <section class="section">
      <h2 class="section-title">
        ðŸ“Š Estado Actual
        <span class="info-icon" id="pattern-info">â„¹ï¸</span>
      </h2>
      <div class="current-state" id="current-state">
        <div class="state-item">
          <span class="label">Ãšltimo:</span>
          <span class="value" id="last-result">--</span>
        </div>
        <div class="state-item">
          <span class="label">Fase:</span>
          <span class="value" id="game-phase">
            <span class="status-dot"></span>
            <span id="phase-text">Desconocida</span>
          </span>
        </div>
        <div class="state-item full-width">
          <span class="label">PatrÃ³n Sniper:</span>
          <span class="value" id="filters-status">â³ Esperando datos...</span>
        </div>
      </div>

      <!-- Tooltip del patrÃ³n -->
      <div class="tooltip" id="pattern-tooltip">
        <div class="tooltip-content">
          <h3>ðŸŽ¯ Diagrama de Flujo del PatrÃ³n</h3>
          <div class="flowchart">
            <div class="flow-step">
              <div class="flow-box start">ðŸŽ² Inicio</div>
              <div class="flow-arrow">â†“</div>
            </div>
            <div class="flow-step">
              <div class="flow-box condition">Â¿Resultado < 1.12x?</div>
                  <div class="flow-arrow">â†“ SÃ­</div>
              </div>
              <div class="flow-step">
                <div class="flow-box action">â³ Esperar siguiente ronda</div>
                <div class="flow-arrow">â†“</div>
              </div>
              <div class="flow-step">
                <div class="flow-box condition">Â¿Resultado > 1.25x?</div>
                <div class="flow-arrow">â†“ SÃ­</div>
              </div>
              <div class="flow-step">
                <div class="flow-box success">âœ… Ejecutar Apuesta</div>
              </div>
            </div>
            <p style="font-size: 11px; margin-top: 10px; color: #94a3b8;">
              El patrÃ³n busca un multiplicador bajo seguido de uno alto para maximizar probabilidades.
            </p>
          </div>
        </div>
    </section>

    <!-- EstadÃ­sticas y Contador -->
    <section class="section">
      <h2 class="section-title">ðŸ“Š EstadÃ­sticas y Contador</h2>

      <div class="stats-grid-2x2">
        <div class="stat-card-compact">
          <div class="stat-icon">ðŸ”¢</div>
          <div class="stat-label-compact">Rondas</div>
          <div class="stat-value-compact primary" id="round-number">0</div>
        </div>
        <div class="stat-card-compact">
          <div class="stat-icon">âœ…</div>
          <div class="stat-label-compact">Ganadas</div>
          <div class="stat-value-compact success" id="stat-wins">0</div>
        </div>
        <div class="stat-card-compact">
          <div class="stat-icon">âŒ</div>
          <div class="stat-label-compact">Perdidas</div>
          <div class="stat-value-compact danger" id="stat-losses">0</div>
        </div>
        <div class="stat-card-compact">
          <div class="stat-icon">ðŸ“ˆ</div>
          <div class="stat-label-compact">Win Rate</div>
          <div class="stat-value-compact" id="stat-winrate">0%</div>
        </div>
      </div>

      <button id="btn-reset-all" class="btn btn-secondary">
        ðŸ”„ Reiniciar
      </button>
      <p style="font-size: 12px; color: #94a3b8; margin-top: 8px;">
        Reinicia contador, historial y estadÃ­sticas
      </p>
    </section>

    <!-- Historial -->
    <section class="section">
      <h2 class="section-title">
        ðŸ“œ Historial (Ãšltimas 20)
        <span class="info-icon" id="history-legend-icon">â„¹ï¸</span>
      </h2>
      <div class="history-container" id="history-container">
        <div class="history-empty">Esperando resultados...</div>
      </div>

      <!-- Tooltip de leyenda de colores -->
      <div class="tooltip" id="history-legend-tooltip">
        <div class="tooltip-content">
          <h3>ðŸŽ¨ Leyenda de Colores</h3>
          <div class="legend-items">
            <div class="legend-item">
              <span class="legend-color" style="background: #3b82f6;"></span>
              <span>Bajo (< 2x)</span>
            </div>
            <div class="legend-item">
              <span class="legend-color" style="background: #a855f7;"></span>
              <span>Medio (2x - 3x)</span>
            </div>
            <div class="legend-item">
              <span class="legend-color" style="background: #f59e0b;"></span>
              <span>Alto (3x - 10x)</span>
            </div>
            <div class="legend-item">
              <span class="legend-color" style="background: #ef4444;"></span>
              <span>Muy Alto (> 10x)</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- CalibraciÃ³n -->
    <section class="section">
      <h2 class="section-title">âš™ï¸ CalibraciÃ³n de Botones</h2>
      <div class="calibration-status">
        <div class="cal-item">
          <span>BotÃ³n 1:</span>
          <span id="btn1-status" class="status-text">âŒ No calibrado</span>
        </div>
        <div class="cal-item">
          <span>BotÃ³n 2:</span>
          <span id="btn2-status" class="status-text">âŒ No calibrado</span>
        </div>
      </div>
      <button id="btn-calibrate" class="btn btn-primary">
        ðŸŽ¯ Calibrar Botones
      </button>
      <button id="btn-reset-cal" class="btn btn-secondary">
        ðŸ”„ Resetear CalibraciÃ³n
      </button>
    </section>

    <!-- SelecciÃ³n de Multiplicador -->
    <section class="section">
      <h2 class="section-title">ðŸŽ² Elemento de Multiplicador</h2>
      <div class="calibration-status">
        <div class="cal-item">
          <span>Estado:</span>
          <span id="multiplier-status" class="status-text">âŒ No seleccionado</span>
        </div>
      </div>
      <button id="btn-select-multiplier" class="btn btn-primary">
        ðŸŽ¯ Seleccionar Multiplicador
      </button>
      <button id="btn-reset-multiplier" class="btn btn-secondary">
        ðŸ”„ Resetear SelecciÃ³n
      </button>
      <p style="font-size: 12px; color: #94a3b8; margin-top: 8px;">
        Haz clic en el primer elemento del historial (el mÃ¡s reciente)
      </p>
    </section>

    <!-- Balance Tracking -->
    <section class="section">
      <h2 class="section-title">ðŸ’° Balance</h2>
      <div class="balance-display">
        <div class="balance-value" id="balance-value">--</div>
        <div class="balance-change" id="balance-change"></div>
      </div>
      <div class="calibration-status">
        <div class="cal-item">
          <span>Estado:</span>
          <span id="balance-status" class="status-text">âŒ No seleccionado</span>
        </div>
      </div>
      <button id="btn-select-balance" class="btn btn-primary">
        ðŸ’° Seleccionar Balance
      </button>
      <button id="btn-reset-balance" class="btn btn-secondary">
        ðŸ”„ Resetear Balance
      </button>
      <p style="font-size: 12px; color: #94a3b8; margin-top: 8px;">
        Haz clic en el texto que muestra tu dinero actual (ej: â‚¬100.00)
      </p>
    </section>

    <!-- Sniper Trigger -->
    <section class="section">
      <h2 class="section-title">ðŸŽ® Sniper Trigger</h2>
      <div class="sniper-status" id="sniper-status">
        <div class="status-row">
          <span>Estado:</span>
          <span id="sniper-state">ðŸ”´ Inactivo</span>
        </div>
        <div class="status-row">
          <span>PatrÃ³n:</span>
          <span id="pattern-state">Esperando bajo (<1.12)< /span>
        </div>
      </div>
      <button id="btn-toggle-sniper" class="btn btn-success">
        ðŸŸ¢ Activar Sniper
      </button>
      <button id="btn-test-click" class="btn btn-secondary">
        ðŸ§ª Probar Clics
      </button>
    </section>

    <!-- Controles Adicionales -->
    <section class="section">
      <h2 class="section-title">ðŸ› ï¸ Controles</h2>
      <button id="btn-history" class="btn btn-secondary">
        ðŸ“œ Historial
      </button>
    </section>
    <!-- Vista de Historial Completo -->
    <!-- Add this BEFORE <script src="sidepanel.js"></script> -->

    <div id="history-view" class="history-view hidden">
      <div class="history-view-header">
        <button id="btn-back-to-main" class="btn-icon">â† Volver</button>
        <h2>ðŸ“œ Historial Completo</h2>
        <button id="btn-export-history" class="btn-icon">ðŸ’¾ Exportar</button>
      </div>

      <div class="history-table-container">
        <table class="history-table">
          <thead>
            <tr>
              <th>#</th>
              <th>Multiplicador</th>
              <th>Timestamp</th>
              <th>PatrÃ³n</th>
            </tr>
          </thead>
          <tbody id="history-table-body">
            <tr>
              <td colspan="4" class="history-empty">No hay datos en el historial</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>


  </div>

  <script src="sidepanel.js"></script>
</body>

</html>